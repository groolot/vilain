% WARNING: to compile this file you have to enable the shell escape
% while invoking the pdflatex compiler: pdflatex --shell-escape
\documentclass[a4paper,titlepage,oneside]{article}

\usepackage{../../vilain}
\usepackage{mathtools}
\usepackage{pdflscape}

\addbibresource{../../vilain.bib}
\usepackage[%
	pdftex,%
	bookmarks=false,%
	bookmarksopen=false,%
	bookmarksnumbered=false,%
	pdfmenubar=true,%
	pdftoolbar=true,%
	pdfpagelabels=true,%
	pdftitle={Keyboard shortcuts},%
	pdfauthor={Gr\'egory DAVID},%
	pdfsubject={vilain, keyboard shortcuts},%
	pdfpagelayout={OneColumn},%
	pdfstartview=FitH%
]{hyperref}

\newcommand{\GraphvizIT}[7][scale=1]{
  \newwrite\dotfile
  \immediate\openout\dotfile=#4.dot
  \immediate\write\dotfile{#3 #4 {\string#5}}
  \immediate\closeout\dotfile
  \immediate\write18{bash -c "#2 -Tpdf -o#4.pdf #4.dot"}
  \IfFileExists{#4.pdf}
  % the pdf exists: include it
  { \begin{figure}[htbp]
        %\fbox{
          %\centering
          %\begin{minipage}[c]{\linewidth}
          %    \centering
              \includegraphics[#1]{#4.pdf}
              \caption{#6}
              \label{#7}
          %\end{minipage}
        %}
    \end{figure}
  }
  % the pdf was not created - show a hint
  { \fbox{ \begin{tabular}{l}
        The file \texttt{#4.pdf} hasn't been created from
        \texttt{#4.dot} yet. \\
        We attempted to create it with:\\
        `\texttt{#2 -Tpdf -o#4.pdf #4.dot}' \\
        but that seems not to have worked. You need to execute `\texttt{pdflatex}' with \\
        the `\texttt{-shell-escape}' option. You need graphviz to be compiled with \\
        the cairo lib.
      \end{tabular}}
  }
}

\newcommand{\digraph}[6][scale=1]{
    \GraphvizIT[#1]{#2}{digraph}{#3}{#4}{#5}{#6}
}

\newcommand{\nondigraph}[6][scale=1]{
    \GraphvizIT[#1]{#2}{graph}{#3}{#4}{#5}{#6}
}

\newcommand{\oscusage}[1]{\texttt{\scriptsize #1}}
\definecolor{darkRed}{RGB}{128,0,0}
\definecolor{darkGreen}{RGB}{0,128,0}
\definecolor{darkBlue}{RGB}{0,0,128}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%        EXAMPLES          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\digraph[angle=90,height=15cm]{dot}{exo1}{
%                            graph [label="Chemin critiques : [E, J, B, F] et [E, G, H, A, F]",
%								rankdir=LR,
%								splines=True
%							];
%							node [shape=record];
%							A	 [label="A | { 7 | 7 }"];
%							F	 [label="F | { 10 | 10 }"];
%							A -> F	 [label=3];
%							C	 [label="C | { 10 | 11 }"];
%							Fin	 [label="Fin | { 12 | 12 }"];
%							C -> Fin	 [label=1];
%							B	 [label="B | { 8 | 8 }"];
%							B -> C	 [label=2];
%							B -> F	 [label=2];
%							E	 [label="E | { 0 | 0 }"];
%							D	 [label="D | { 2 | 4 }"];
%							E -> D	 [label=2];
%							G	 [label="G | { 2 | 2 }"];
%							E -> G	 [label=2];
%							J	 [label="J | { 2 | 2 }"];
%							E -> J	 [label=2];
%							I	 [label="I | { 6 | 8 }"];
%							D -> I	 [label=4];
%							G -> B	 [label=2];
%							H	 [label="H | { 4 | 4 }"];
%							G -> H	 [label=2];
%							F -> Fin	 [label=2];
%							I -> C	 [label=3];
%							H -> A	 [label=3];
%							J -> B	 [label=6];
%							Debut	 [label="Debut | { 0 | 0 }"];
%							Debut -> E	 [label=0];
%						}{Caption}{Label}

%\digraph[width=16cm]{dot}{schema}{
%    graph [splines=yes,concentrate=yes,center=yes,fontname=Courier];
%    edge [fontsize=14,fontname=Courier];
%    subgraph clusterZYX {
%        graph [label="Scop ZYX",labelloc=t,labeljust=r,fontsize=20];
%        node [fontname=Courier,shape=component];
%        repoNotepad [label="Depot SVN Notepad++"];
%        repoVSL [label="Depot SVN VirtualStageLight"];
%    };
%    subgraph clusterXWVU {
%        graph [label="SARL XWVU",labelloc=t,labeljust=r,fontsize=20];
%        node [fontname=Courier,shape=component];
%        repoKeePass [label="Depot SVN KeePass"];
%        repoPersoUrsula [label="Depot SVN d'Ursula"];
%        node [fontname=Courier,image="system-users.png",shape=none,labelloc=b];
%        Ursula;
%    };
%    node [fontname=Courier,image="system-users.png",shape=none,labelloc=b];
%        Zorra;
%        Yann;
%        Xavier;
%        Winona;
%        Valerie;
%    Ursula -> repoPersoUrsula [label="personnel"];
%    {Winona,Xavier,Ursula,Valerie} -> repoKeePass;
%    {Yann,Xavier} -> repoVSL;
%    {Zorra,Yann} -> repoNotepad;
%}{Caption}{Label}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Easily include image w/wo box around
% usage:
%     \image{path/to/file.png}{width=13cm}{This is the caption}{fig:ThiIsTheReferenceLabel}
%     \imageBoxed{path/to/file.png}{width=13cm}{This is the caption}{fig:ThiIsTheReferenceLabel}
%
% after what you can reference the image by:
%     \ref{fig:ThiIsTheReferenceLabel}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Easily include numbered tabular
% usage:
%     \tableau{|l|p{4cm}|c|}{Caption}{tab:Label}{
%     \hline
%     A & B & C \\ \hline
%     etc.
%     }
%
% after what you can reference the tabular by:
%     \ref{tab:Label}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\author{GrÃ©gory \bsc{David}}
\title{\vilain{} -- OSC user guide}
\date{\today{}}

\begin{document}
\maketitle{}
\tableofcontents{}
\newpage

\section{Schematics}
\figurename{} \vref{fig:OSCSchematics} presents the global network
specifications implementation.

\digraph[width=8cm]{dot}{OSC_schematics}{
  graph [splines=polyline,concentrate=yes,center=yes];
  edge [fontsize=14,fontname="Courier Bold"];
  vilain -> internetCloud -> client;
}{\vilain{} OSC implementation network}{fig:OSCSchematics}


\section{OSC tree}
Following \tablename{} \vref{tab:OSCtree} shows the global OSC tree
structure.
\renewcommand{\arraystretch}{1.5}
\begin{landscape}
\tableau{>{\ttfamily}l>{\ttfamily\bfseries}c>{$}l<{$}>{\ttfamily\bfseries}cp{6cm}>{\ttfamily\scriptsize}l}{\vilain{}'s OSC tree structure}{tab:OSCtree}{
  \firsthline
  OSC Address & Argument(s) & \text{Range(s)} & Default & Description & {\normalsize Example} \\
  \hline \hline

  /vilain & - & - & - & - & - \\

  /vilain/commands & - & - & - & - & - \\

  /vilain/commands/load & s & \text{filesystem limitations} & - & Load a project file. The file string must be given as a full path to the file & /vilain/commands/load s /path/to/project/file \\

  /vilain/commands/save & s & \text{filesystem limitations} & - & Save current project settings to the file & /vilain/commands/save s /path/to/project/file \\ \hline

  /vilain/nodes & - & - & - & - & - \\

  /vilain/nodes/nodeName & - & - & - & Where \texttt{nodeName} is the object's name inside \vilain{} & - \\

  /vilain/nodes/nodeName/color & \textcolor{darkRed}{i}\textcolor{darkGreen}{i}\textcolor{darkBlue}{i}i & \forall (r,g,b,a) \in [0,255] & 255 & Set the whole color/transparency (RGBA) in one shot. \textcolor{darkRed}{Red}, \textcolor{darkGreen}{Green}, \textcolor{darkBlue}{Blue}, Alpha (transparency) are ordered. & /vilain/nodes/pyramid-top/color iiii \textcolor{darkRed}{123} \textcolor{darkGreen}{34} \textcolor{darkBlue}{221} 137 \\

  /vilain/nodes/nodeName/color/red & i &  \text{red} \in [0,255] & 255 & Set the \textcolor{darkRed}{Red} component. & /vilain/nodes/pyramid-top/color/red i \textcolor{darkRed}{123} \\

  /vilain/nodes/nodeName/color/green & i & \text{green} \in [0,255] & 255 & Set the \textcolor{darkGreen}{Green} component. & /vilain/nodes/pyramid-top/color/green i \textcolor{darkGreen}{34} \\

  /vilain/nodes/nodeName/color/blue & i & \text{blue} \in [0,255] & 255 & Set the \textcolor{darkBlue}{Blue} component. & /vilain/nodes/pyramid-top/color/blue i \textcolor{darkBlue}{34} \\

  /vilain/nodes/nodeName/color/alpha & i & \text{alpha} \in [0,255] & 255 & Set the Alpha component. 0 makes node completely transparent (and unvisible), 255 totally opaque, and all other values makes it partially visible giving visibility to underlayered node & /vilain/nodes/pyramid-top/color/red i 137 \\

  /vilain/nodes/nodeName/alphamode & s & \text{alphamode} \in \{\text{none}, \text{alpha}, \text{add}, \text{substract}, \text{multiply}, \text{screen}\} & alpha & Set the alpha blending mode for the node. & /vilain/nodes/pyramid-top/alphamode s screen \\

  /vilain/nodes/nodeName/position & fff &  \begin{array}{l} X \in {[{-\frac{\text{screen width}+\text{node width}}{2}},\frac{\text{screen width}+\text{node width}}{2}]}\\ Y \in {[{-\frac{\text{screen height}+\text{node height}}{2}},\frac{\text{screen height}+\text{node height}}{2}]}\\ Z \in {[0,3.40282 \times 10^{+38}-1]} \end{array} & 0 & Set the XYZ node coordinates. Note that the Z coordinate is used to layer the node beside others. & /vilain/nodes/nodeName/position fff 100. 23. 5. \\

  \lasthline
}{24cm}
\end{landscape}

\newpage
% References \newpage
\printbibheading
\printbibliography[nottype=online,check=notonline,heading=subbibliography,title={Bibliography}]
\printbibliography[check=online,heading=subbibliography,title={Webography}]
\nocite{openframeworks,ofxOscRouter}
\end{document}
